[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for org.apache.kylin:kylin-core-common:jar:4.0.3-SNAPSHOT
[WARNING] 'dependencyManagement.dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.apache.spark:spark-sql_${scala.binary.version}:jar -> duplicate declaration of version ${spark.version} @ org.apache.kylin:kylin:4.0.3-SNAPSHOT, /Users/carolsong/kylin/pom.xml, line 1109, column 19
[WARNING] 'dependencyManagement.dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.apache.spark:spark-hive_${scala.binary.version}:jar -> duplicate declaration of version ${spark.version} @ org.apache.kylin:kylin:4.0.3-SNAPSHOT, /Users/carolsong/kylin/pom.xml, line 1115, column 19
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for org.apache.kylin:kylin-spark-metadata:jar:4.0.3-SNAPSHOT
[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:build-helper-maven-plugin is missing. @ line 51, column 21
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for org.apache.kylin:kylin-spark-common:jar:4.0.3-SNAPSHOT
[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:build-helper-maven-plugin is missing. @ line 65, column 21
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for org.apache.kylin:kylin-spark-query:jar:4.0.3-SNAPSHOT
[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:build-helper-maven-plugin is missing. @ line 144, column 21
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for org.apache.kylin:kylin-soft-affinity-cache:jar:4.0.3-SNAPSHOT
[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:build-helper-maven-plugin is missing. @ line 62, column 21
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for org.apache.kylin:kylin:pom:4.0.3-SNAPSHOT
[WARNING] 'dependencyManagement.dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.apache.spark:spark-sql_${scala.binary.version}:jar -> duplicate declaration of version ${spark.version} @ line 1109, column 19
[WARNING] 'dependencyManagement.dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.apache.spark:spark-hive_${scala.binary.version}:jar -> duplicate declaration of version ${spark.version} @ line 1115, column 19
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
[INFO] 
[INFO] ------------------< org.apache.kylin:kylin-core-job >-------------------
[INFO] Building Apache Kylin - Core Job 4.0.3-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (enforce-maven-version) @ kylin-core-job ---
[INFO] 
[INFO] --- maven-checkstyle-plugin:2.17:check (check-style) @ kylin-core-job ---
[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.2:prepare-agent (pre-test) @ kylin-core-job ---
[INFO] surefireArgLine set to -javaagent:/Users/carolsong/.m2/repository/org/jacoco/org.jacoco.agent/0.8.2/org.jacoco.agent-0.8.2-runtime.jar=destfile=/Users/carolsong/kylin/core-job/../target/jacoco.exec,append=true
[INFO] 
[INFO] --- maven-remote-resources-plugin:1.5:process (process-resource-bundles) @ kylin-core-job ---
[INFO] 
[INFO] --- maven-resources-plugin:3.0.1:resources (default-resources) @ kylin-core-job ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 4 resources
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ kylin-core-job ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-dependency-plugin:2.10:copy (copy-jamm) @ kylin-core-job ---
[INFO] Configured Artifact: com.github.jbellis:jamm:?:jar
[INFO] com.github.jbellis:jamm:0.3.1:jar already exists in /Users/carolsong/kylin/core-job/target/test-classes
[INFO] 
[INFO] --- maven-resources-plugin:3.0.1:testResources (default-testResources) @ kylin-core-job ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/carolsong/kylin/core-job/src/test/resources
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:testCompile (default-testCompile) @ kylin-core-job ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.21.0:test (default-test) @ kylin-core-job ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running org.apache.kylin.job.impl.curator.CuratorLeaderSelectorTest
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/Users/carolsong/.m2/repository/org/slf4j/slf4j-log4j12/1.7.30/slf4j-log4j12-1.7.30.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/Users/carolsong/.m2/repository/org/slf4j/slf4j-reload4j/1.7.36/slf4j-reload4j-1.7.36.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
2022-12-02 01:21:47,089 INFO  [main] common.KylinConfig:189 : Destroy KylinConfig
2022-12-02 01:21:47,318 INFO  [main] common.KylinConfig:118 : Loading kylin-defaults.properties from file:/Users/carolsong/.m2/repository/org/apache/kylin/kylin-core-common/4.0.3-SNAPSHOT/kylin-core-common-4.0.3-SNAPSHOT.jar!/kylin-defaults.properties
2022-12-02 01:21:47,327 WARN  [main] common.KylinConfig:136 : [CTEST][LOAD-PARAM] Loading ctest.properties from file:/Users/carolsong/.m2/repository/org/apache/kylin/kylin-core-common/4.0.3-SNAPSHOT/kylin-core-common-4.0.3-SNAPSHOT.jar!/ctest.properties
2022-12-02 01:21:47,336 INFO  [main] common.KylinConfig:370 : Use KYLIN_CONF=../examples/test_metadata/
2022-12-02 01:21:47,347 WARN  [main] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.metadata.url 
2022-12-02 01:21:47,429 WARN  [main] common.KylinConfigBase:293 : [CTEST][SET-PARAM]: Kylin Config was updated with kylin.metadata.url.identifier : kylin_metadata
2022-12-02 01:21:47,431 WARN  [main] common.KylinConfigBase:128 : KYLIN_HOME was not set
2022-12-02 01:21:47,431 INFO  [main] common.KylinConfig:370 : Use KYLIN_CONF=../examples/test_metadata/
2022-12-02 01:21:47,431 INFO  [main] common.KylinConfig:171 : Initialized a new KylinConfig from getInstanceFromEnv : 391479787
2022-12-02 01:21:47,431 WARN  [main] common.KylinConfigBase:293 : [CTEST][SET-PARAM]: Kylin Config was updated with kylin.metadata.url : ../examples/test_metadata/
2022-12-02 01:21:47,432 WARN  [main] common.KylinConfigBase:293 : [CTEST][SET-PARAM]: Kylin Config was updated with kylin.env.hdfs-working-dir : file:///tmp/kylin
2022-12-02 01:21:47,550 INFO  [main] imps.CuratorFrameworkImpl:235 : Starting
2022-12-02 01:21:47,844 INFO  [main-EventThread] state.ConnectionStateManager:228 : State change: CONNECTED
2022-12-02 01:21:47,860 WARN  [Curator-LeaderSelector-0] utils.ZKPaths:76 : The version of ZooKeeper being used doesn't support Container nodes. CreateMode.PERSISTENT will be used instead.
2022-12-02 01:21:47,890 INFO  [Curator-LeaderSelector-0] curator.CuratorLeaderSelector:100 : server1:1111 is the leader for job engine now.
2022-12-02 01:21:47,892 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.server.mode all
2022-12-02 01:21:47,899 INFO  [Curator-LeaderSelector-0] threadpool.DefaultScheduler:141 : Initializing Job Engine ....
2022-12-02 01:21:47,900 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.job.max-concurrent-jobs 10
2022-12-02 01:21:47,901 INFO  [Curator-LeaderSelector-0] threadpool.DefaultScheduler:162 : Starting resume all running jobs.
2022-12-02 01:21:47,923 INFO  [Curator-LeaderSelector-0] common.KylinConfig:505 : Creating new manager instance of class org.apache.kylin.job.execution.ExecutableManager
2022-12-02 01:21:48,026 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.metadata.url ../examples/test_metadata/
2022-12-02 01:21:48,042 INFO  [Curator-LeaderSelector-0] execution.ExecutableManager:94 : Using metadata url: ../examples/test_metadata/
2022-12-02 01:21:48,056 INFO  [Curator-LeaderSelector-0] common.KylinConfig:505 : Creating new manager instance of class org.apache.kylin.job.dao.ExecutableDao
2022-12-02 01:21:48,057 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:83 : [CTEST][GET-PARAM] kylin.metadata.url ../examples/test_metadata/
2022-12-02 01:21:48,058 INFO  [Curator-LeaderSelector-0] dao.ExecutableDao:83 : Using metadata url: ../examples/test_metadata/
2022-12-02 01:21:48,059 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.metadata.url ../examples/test_metadata/
2022-12-02 01:21:48,059 INFO  [Curator-LeaderSelector-0] persistence.ResourceStore:90 : Using metadata url ../examples/test_metadata/ for resource store
2022-12-02 01:21:48,066 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.metadata.url ../examples/test_metadata/
2022-12-02 01:21:48,070 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.metadata.check-copy-on-write false
2022-12-02 01:21:48,071 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.resourcestore.reconnect-base-ms 1000
2022-12-02 01:21:48,071 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.resourcestore.reconnect-max-ms 60000
2022-12-02 01:21:48,104 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.metadata.check-copy-on-write false
2022-12-02 01:21:48,105 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.resourcestore.reconnect-base-ms 1000
2022-12-02 01:21:48,105 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.resourcestore.reconnect-max-ms 60000
2022-12-02 01:21:48,109 INFO  [Curator-LeaderSelector-0] common.KylinConfig:505 : Creating new manager instance of class org.apache.kylin.metadata.cachesync.Broadcaster
2022-12-02 01:21:48,110 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.metadata.sync-error-handler null
2022-12-02 01:21:48,111 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.server.cluster-servers 
2022-12-02 01:21:48,111 WARN  [Curator-LeaderSelector-0] cachesync.Broadcaster:100 : There is no available rest server; check the 'kylin.server.cluster-servers' config
2022-12-02 01:21:48,113 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.resourcestore.reconnect-base-ms 1000
2022-12-02 01:21:48,113 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.resourcestore.reconnect-max-ms 60000
2022-12-02 01:21:48,114 INFO  [Curator-LeaderSelector-0] threadpool.DefaultScheduler:165 : Finishing resume all running jobs.
2022-12-02 01:21:48,116 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.job.scheduler.poll-interval-second 30
2022-12-02 01:21:48,116 INFO  [Curator-LeaderSelector-0] threadpool.DefaultScheduler:169 : Fetching jobs every 30 seconds
2022-12-02 01:21:48,116 WARN  [Curator-LeaderSelector-0] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.job.scheduler.priority-considered false
2022-12-02 01:21:48,121 INFO  [Curator-LeaderSelector-0] threadpool.DefaultScheduler:179 : Creating fetcher pool instance:255306180
2022-12-02 01:21:49,858 INFO  [main] curator.CuratorLeaderSelector:95 : server1:1111 is stopped
2022-12-02 01:21:49,864 ERROR [Curator-LeaderSelector-0] curator.CuratorLeaderSelector:107 : server1:1111 was interrupted.
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.kylin.job.impl.curator.CuratorLeaderSelector.takeLeadership(CuratorLeaderSelector.java:104)
	at org.apache.curator.framework.recipes.leader.LeaderSelector$WrappedListener.takeLeadership(LeaderSelector.java:559)
	at org.apache.curator.framework.recipes.leader.LeaderSelector.doWork(LeaderSelector.java:421)
	at org.apache.curator.framework.recipes.leader.LeaderSelector.doWorkLoop(LeaderSelector.java:466)
	at org.apache.curator.framework.recipes.leader.LeaderSelector.access$100(LeaderSelector.java:65)
	at org.apache.curator.framework.recipes.leader.LeaderSelector$2.call(LeaderSelector.java:246)
	at org.apache.curator.framework.recipes.leader.LeaderSelector$2.call(LeaderSelector.java:240)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2022-12-02 01:21:49,867 WARN  [Curator-LeaderSelector-0] curator.CuratorLeaderSelector:111 : server1:1111 relinquishing leadership.
2022-12-02 01:21:49,867 INFO  [Curator-LeaderSelector-0] threadpool.DefaultScheduler:186 : Shutting down DefaultScheduler ....
2022-12-02 01:21:49,879 INFO  [Curator-LeaderSelector-1] curator.CuratorLeaderSelector:100 : server2:2222 is the leader for job engine now.
2022-12-02 01:21:49,879 INFO  [Curator-LeaderSelector-1] threadpool.DefaultScheduler:141 : Initializing Job Engine ....
2022-12-02 01:21:49,879 WARN  [Curator-LeaderSelector-1] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.job.max-concurrent-jobs 10
2022-12-02 01:21:49,879 INFO  [Curator-LeaderSelector-1] threadpool.DefaultScheduler:162 : Starting resume all running jobs.
2022-12-02 01:21:49,879 WARN  [Curator-LeaderSelector-1] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.resourcestore.reconnect-base-ms 1000
2022-12-02 01:21:49,879 WARN  [Curator-LeaderSelector-1] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.resourcestore.reconnect-max-ms 60000
2022-12-02 01:21:49,880 INFO  [Curator-LeaderSelector-1] threadpool.DefaultScheduler:165 : Finishing resume all running jobs.
2022-12-02 01:21:49,883 WARN  [Curator-LeaderSelector-1] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.job.scheduler.poll-interval-second 30
2022-12-02 01:21:49,883 INFO  [Curator-LeaderSelector-1] threadpool.DefaultScheduler:169 : Fetching jobs every 30 seconds
2022-12-02 01:21:49,884 WARN  [Curator-LeaderSelector-1] common.KylinConfigBase:195 : [CTEST][GET-PARAM] kylin.job.scheduler.priority-considered false
2022-12-02 01:21:49,884 INFO  [Curator-LeaderSelector-1] threadpool.DefaultScheduler:179 : Creating fetcher pool instance:112395928
2022-12-02 01:21:50,891 INFO  [main] curator.CuratorLeaderSelector:95 : server2:2222 is stopped
2022-12-02 01:21:50,891 ERROR [Curator-LeaderSelector-1] curator.CuratorLeaderSelector:107 : server2:2222 was interrupted.
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.kylin.job.impl.curator.CuratorLeaderSelector.takeLeadership(CuratorLeaderSelector.java:104)
	at org.apache.curator.framework.recipes.leader.LeaderSelector$WrappedListener.takeLeadership(LeaderSelector.java:559)
	at org.apache.curator.framework.recipes.leader.LeaderSelector.doWork(LeaderSelector.java:421)
	at org.apache.curator.framework.recipes.leader.LeaderSelector.doWorkLoop(LeaderSelector.java:466)
	at org.apache.curator.framework.recipes.leader.LeaderSelector.access$100(LeaderSelector.java:65)
	at org.apache.curator.framework.recipes.leader.LeaderSelector$2.call(LeaderSelector.java:246)
	at org.apache.curator.framework.recipes.leader.LeaderSelector$2.call(LeaderSelector.java:240)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2022-12-02 01:21:50,896 WARN  [Curator-LeaderSelector-1] curator.CuratorLeaderSelector:111 : server2:2222 relinquishing leadership.
2022-12-02 01:21:50,896 INFO  [Curator-LeaderSelector-1] threadpool.DefaultScheduler:186 : Shutting down DefaultScheduler ....
2022-12-02 01:21:50,896 WARN  [Curator-LeaderSelector-1] threadpool.DefaultScheduler:195 : InterruptedException is caught when shutting down job fetcher.
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2067)
	at java.util.concurrent.ThreadPoolExecutor.awaitTermination(ThreadPoolExecutor.java:1475)
	at org.apache.kylin.job.impl.threadpool.DefaultScheduler.shutdown(DefaultScheduler.java:192)
	at org.apache.kylin.job.impl.curator.CuratorLeaderSelector.takeLeadership(CuratorLeaderSelector.java:113)
	at org.apache.curator.framework.recipes.leader.LeaderSelector$WrappedListener.takeLeadership(LeaderSelector.java:559)
	at org.apache.curator.framework.recipes.leader.LeaderSelector.doWork(LeaderSelector.java:421)
	at org.apache.curator.framework.recipes.leader.LeaderSelector.doWorkLoop(LeaderSelector.java:466)
	at org.apache.curator.framework.recipes.leader.LeaderSelector.access$100(LeaderSelector.java:65)
	at org.apache.curator.framework.recipes.leader.LeaderSelector$2.call(LeaderSelector.java:246)
	at org.apache.curator.framework.recipes.leader.LeaderSelector$2.call(LeaderSelector.java:240)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2022-12-02 01:21:52,017 INFO  [main-EventThread] state.ConnectionStateManager:228 : State change: SUSPENDED
2022-12-02 01:21:52,037 INFO  [main] common.KylinConfig:189 : Destroy KylinConfig
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 7.054 s - in org.apache.kylin.job.impl.curator.CuratorLeaderSelectorTest
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.2:report (post-test) @ kylin-core-job ---
[INFO] Skipping JaCoCo execution due to missing execution data file.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  16.363 s
[INFO] Finished at: 2022-12-01T19:21:52-06:00
[INFO] ------------------------------------------------------------------------
